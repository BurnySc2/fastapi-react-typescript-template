(this["webpackJsonpfastapi-react-typescript-template"]=this["webpackJsonpfastapi-react-typescript-template"]||[]).push([[0],{31:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),a=n(19),s=n.n(a),o=(n(31),n(20)),i=n(21),u=n(26),l=n(25),d=n(12),b=n(3),j=n(0);function p(){return Object(j.jsx)("div",{className:"text-center my-2",children:"This is my about page! Here I display features of svelte that I have implemented"})}var m=n(2),x=n.n(m),f=n(5),h=n(11),O=n(9),v=n(22),y=n.n(v);function g(e){var t=e.message,n=t.timestamp,c=t.author,a=t.message,s=c===e.userName?"You":c;return Object(j.jsxs)(r.a.Fragment,{children:[Object(j.jsx)("div",{className:"col-span-1",children:y()(1e3*n).format("HH:mm:ss")}),Object(j.jsx)("div",{className:"col-span-1",children:s}),Object(j.jsx)("div",{className:"col-span-8",children:a})]})}function k(){var e=Object(c.useState)(""),t=Object(O.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),s=Object(O.a)(a,2),o=s[0],i=s[1],u=Object(c.useState)(""),l=Object(O.a)(u,2),d=l[0],b=l[1],p=Object(c.useState)(""),m=Object(O.a)(p,2),v=m[0],y=m[1],k=Object(c.useState)(""),w=Object(O.a)(k,2),N=w[0],S=w[1],C=Object(c.useState)([{timestamp:123,author:"yolo",message:"example message"}]),T=Object(O.a)(C,2),E=T[0],M=T[1];Object(c.useEffect)((function(){R()}),[]);var U,H=Object(c.useState)(null),J=Object(O.a)(H,2),_=J[0],I=J[1],R=function e(){var t="ws://localhost:8000";var n=new WebSocket("".concat(t,"/chatws"));n.onmessage=function(e){try{var t=JSON.parse(e.data);console.log("Received: ".concat(Object.keys(t))),"message"in t?console.log("Received: ".concat(t.message)):"error"in t?"usernameTaken"===t.error&&(S("Username '".concat(d,"' is already taken!")),b("")):"newMessage"in t?M((function(e){return[].concat(Object(h.a)(e),[t.newMessage])})):"newMessageHistory"in t?M(Object(h.a)(t.newMessageHistory)):"connectUser"in t&&(console.log("Successfully connected to server with username ".concat(t.connectUser)),S(""),b(""),M([]),r(t.connectUser))}catch(n){console.log("Received unreadable data!"),console.log(e.data)}},n.onclose=function(){setTimeout((function(){e()}),5e3)},n.onopen=function(){if(n){var e=JSON.stringify({message:"Hello from client!"});n.send(e)}},n.onerror=function(){n&&n.close()},I(n)},D=function(){var e=Object(f.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:S(""),_&&1===_.readyState?(console.log("Trying to connect as user '".concat(o,"'")),""===d&&(b(o),_.send(JSON.stringify({tryToConnectUser:o})))):S("WebSocket is not yet ready!");case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(f.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"!==t.key){e.next=3;break}return e.next=3,W();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(f.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Trying to send chat message..."),""!==v&&(_&&1===_.readyState?""!==n&&(_.send(JSON.stringify({sendChatMessage:{timestamp:Date.now()/1e3,author:n,message:v}})),y("")):console.log("Unable to send message - WS not yet ready"));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=E.map((function(e){var t="".concat(e.timestamp,";").concat(e.author,";").concat(e.message);return Object(j.jsx)(g,{message:e,userName:n},t)}));return U=""===d?Object(j.jsx)("input",{id:"username",type:"text",placeholder:"Username",className:"border",value:o,maxLength:20,onChange:function(e){i(e.target.value)}}):Object(j.jsx)("input",{type:"text",placeholder:"Username",className:"border",readOnly:!0,value:d}),""===n?Object(j.jsxs)("div",{className:"flex flex-col m-2 border border-2 border-black items-center",children:[Object(j.jsx)("div",{children:"Connect to chat"}),U,Object(j.jsx)("button",{id:"connect",onClick:D,className:"border-2 border-black p-1",children:"Connect"}),Object(j.jsx)("div",{children:N})]}):Object(j.jsxs)("div",{className:"flex flex-col m-2",children:[Object(j.jsx)("div",{id:"chatbox",className:"grid grid-cols-10 overflow-y-auto",children:A}),Object(j.jsxs)("div",{className:"grid grid-cols-10 gap-2",children:[Object(j.jsx)("input",{id:"chatinput",className:"col-span-9 border-2",type:"text",placeholder:"Write something!",value:v,onChange:function(e){y(e.target.value)},onKeyDown:P}),Object(j.jsx)("button",{id:"sendmessage",className:"col-span-1 border-2",onClick:W,children:"Send"})]})]})}function w(e){var t=e.index,n=e.content,c=e.deleteFunction;return Object(j.jsxs)("div",{className:"grid grid-cols-12 mx-2",children:[Object(j.jsxs)("div",{className:"col-span-2 flex ",children:[Object(j.jsxs)("div",{className:"mx-2 my-auto",children:[t+1,")"]}),Object(j.jsx)("button",{className:"mx-2 p-1  border-2",onClick:c,children:"Delete"})]}),Object(j.jsx)("div",{className:"col-span-10 my-auto",children:n})]})}var N=function(){var e=Object(f.a)(x.a.mark((function e(t){var n,c,r=arguments;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},(c="http://localhost:8000")||console.error("process.env.REACT_APP_PROXY is not set! Check your Env variables"),e.next=5,fetch("".concat(c).concat(t),n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(f.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(f.a)(x.a.mark((function e(t){var n,c,r=arguments;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},e.next=4,N(t,c);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(f.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"DELETE"},e.next=3,N(t,n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function E(){var e=Object(c.useState)(""),t=Object(O.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)([]),s=Object(O.a)(a,2),o=s[0],i=s[1],u=Object(c.useState)(!0),l=Object(O.a)(u,2),d=l[0],b=l[1];Object(c.useEffect)((function(){p()}),[]);var p=function(){var e=Object(f.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S("/api");case 3:if(!(t=e.sent).ok){e.next=13;break}return e.t0=i,e.next=8,t.json();case 8:e.t1=e.sent,(0,e.t0)(e.t1),b(!0),e.next=14;break;case 13:throw new Error(t.statusText);case 14:e.next=19;break;case 16:e.prev=16,e.t2=e.catch(0),b(!1);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(f.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!d){e.next=5;break}return e.next=3,C("/api/".concat(n));case 3:e.next=6;break;case 5:k();case 6:return r(""),e.next=9,p();case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(f.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!d){e.next=5;break}return e.next=3,C("/api_body",{new_todo:n});case 3:e.next=6;break;case 5:k();case 6:return r(""),e.next=9,p();case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(f.a)(x.a.mark((function e(){var t,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!d){e.next=11;break}return e.next=3,C("/api_model",{todo_description:n});case 3:if((t=e.sent).ok){e.next=9;break}return e.next=7,t.text();case 7:c=e.sent,console.log(c);case 9:e.next=12;break;case 11:k();case 12:return r(""),e.next=15,p();case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(f.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!d){e.next=5;break}return e.next=3,T("/api/".concat(t));case 3:e.next=6;break;case 5:N(t);case 6:return e.next=8,p();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=0;o.forEach((function(t){e=Math.max(t.id,e)})),i([].concat(Object(h.a)(o),[{id:e+1,content:n}])),r("")},N=function(e){var t=o.findIndex((function(t){return t.id===e}));t>=0&&i([].concat(Object(h.a)(o.slice(void 0,t)),Object(h.a)(o.slice(t+1))))},E=Object(j.jsx)("input",{id:"newTodoInput",className:"border-2 my-2 mx-1",type:"text",onChange:function(e){r(e.target.value)},value:n,placeholder:"My new todo item"}),M=d?"":Object(j.jsx)("div",{className:"bg-red-300 rounded p-1",children:"Unable to connect to server - running local mode"});return Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{className:"flex flex-col items-center",children:[Object(j.jsxs)("div",{className:"flex",children:[E,Object(j.jsx)("button",{className:"border-2 my-2 mx-1",id:"submit1",onClick:m,children:"Submit"}),Object(j.jsx)("button",{className:"border-2 my-2 mx-1",id:"submit2",onClick:v,children:"SubmitBody"}),Object(j.jsx)("button",{className:"border-2 my-2 mx-1",id:"submit3",onClick:y,children:"SubmitModel"})]}),M]}),Object(j.jsx)("div",{className:"grid grid-cols-1 justify-items-center ",children:Object(j.jsx)("div",{children:o.map((function(e,t){return Object(j.jsx)(w,{index:t,id:e.id,content:e.content,deleteFunction:function(){return g(e.id)}},e.id)}))})})]})}function M(){return Object(j.jsxs)("div",{className:"text-center my-2",children:[Object(j.jsxs)("div",{children:["Hello ","world","!"]}),Object(j.jsxs)("div",{children:["Visit the ",Object(j.jsx)("a",{href:"https://svelte.dev/tutorial",children:"Svelte tutorial"})," to learn how to build Svelte apps."]})]})}function U(){return Object(j.jsx)(d.a,{children:Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{className:"flex justify-center my-2",children:[Object(j.jsx)(d.b,{id:"home",className:"mx-2 p-1 border-2",to:"/",children:"Home"}),Object(j.jsx)(d.b,{id:"about",className:"mx-2 p-1 border-2",to:"/about",children:"About"}),Object(j.jsx)(d.b,{id:"chat",className:"mx-2 p-1 border-2",to:"/chat",children:"NormalChat"}),Object(j.jsx)(d.b,{id:"todo",className:"mx-2 p-1 border-2",to:"/todo",children:"Todo"})]}),Object(j.jsxs)(b.c,{children:[Object(j.jsx)(b.a,{path:"/about",children:Object(j.jsx)(p,{})}),Object(j.jsx)(b.a,{path:"/chat",children:Object(j.jsx)(k,{})}),Object(j.jsx)(b.a,{path:"/todo",children:Object(j.jsx)(E,{})}),Object(j.jsx)(b.a,{path:"/",children:Object(j.jsx)(M,{})})]})]})})}var H=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return Object(j.jsx)("div",{children:Object(j.jsx)(U,{})})}}]),n}(c.Component),J=H;s.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(J,{})}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.ad337369.chunk.js.map